Algorithm:

nreg
mi magic states
io bus on bottom

1: IO on bottom
2: magic state sort by width
3: alloc magic state mi, then route mi in that order
4: After Mi's allocated, drop to IO layer
5: then alloc registers


drops are left block right edge (current taller), and current block left edge (current shorter)

algebra of allowable combinations of nieghbours
 -> routing bus above io bus (1st placement ignore neighbour requirement)
 -> magic state factory on top left corner
 -> routing layer below magic * 1st placement

 second row of magic state, top left as possible, drop vertical on above right
 drop vertical on below left for last row
()

register, topmost alloc, always 1 high, double alloc if above is routing, also require route on bottom
left drop